{"version":3,"sources":["../../../../../../../Desktop/arcain/new/src/lib/data.ts","../../../../../../../Desktop/arcain/new/src/components/ui/card.tsx","../../../../../../../Desktop/arcain/new/src/components/ui/table.tsx","../../../../../../../Desktop/arcain/new/src/components/admin/AdminCitiesManager.tsx/__nextjs-internal-proxy.mjs","../../../../../../../Desktop/arcain/new/src/components/admin/AdminCityRowActions.tsx/__nextjs-internal-proxy.mjs","../../../../../../../Desktop/arcain/new/src/app/admin/cities/page.tsx"],"sourcesContent":["import { promises as fs } from \"fs\";\nimport path from \"path\";\nimport type { House, City, User } from \"@/types\";\n\nconst dataDir = path.join(process.cwd(), \"src/data\");\nconst usersTmpPath = \"/tmp/users.json\";\n\nexport async function readHouses(): Promise<House[]> {\n  const filePath = path.join(dataDir, \"houses.json\");\n  const data = await fs.readFile(filePath, \"utf-8\");\n  return JSON.parse(data);\n}\n\nexport async function writeHouses(houses: House[]): Promise<void> {\n  const filePath = path.join(dataDir, \"houses.json\");\n  try {\n    await fs.writeFile(filePath, JSON.stringify(houses, null, 2), \"utf-8\");\n  } catch {\n    // Read-only filesystem (e.g. Vercel): skip persist\n  }\n}\n\nexport async function readCities(): Promise<City[]> {\n  const filePath = path.join(dataDir, \"cities.json\");\n  const data = await fs.readFile(filePath, \"utf-8\");\n  return JSON.parse(data);\n}\n\nexport async function writeCities(cities: City[]): Promise<void> {\n  const filePath = path.join(dataDir, \"cities.json\");\n  try {\n    await fs.writeFile(filePath, JSON.stringify(cities, null, 2), \"utf-8\");\n  } catch {\n    // Read-only filesystem (e.g. Vercel): skip persist\n  }\n}\n\nfunction mergeUsersByEmail(fileUsers: User[], tmpUsers: User[]): User[] {\n  const byEmail = new Map<string, User>();\n  for (const u of fileUsers) byEmail.set(u.email.toLowerCase(), u);\n  for (const u of tmpUsers) byEmail.set(u.email.toLowerCase(), u);\n  return Array.from(byEmail.values());\n}\n\nexport async function readUsers(): Promise<User[]> {\n  const filePath = path.join(dataDir, \"users.json\");\n  const data = await fs.readFile(filePath, \"utf-8\");\n  const fileUsers: User[] = JSON.parse(data);\n  try {\n    const tmpData = await fs.readFile(usersTmpPath, \"utf-8\");\n    const tmpUsers: User[] = JSON.parse(tmpData);\n    return mergeUsersByEmail(fileUsers, tmpUsers);\n  } catch {\n    return fileUsers;\n  }\n}\n\nexport async function writeUsers(users: User[]): Promise<void> {\n  const filePath = path.join(dataDir, \"users.json\");\n  let fileUsers: User[];\n  try {\n    const data = await fs.readFile(filePath, \"utf-8\");\n    fileUsers = JSON.parse(data);\n  } catch {\n    fileUsers = [];\n  }\n  const merged = mergeUsersByEmail(fileUsers, users);\n  await fs.writeFile(usersTmpPath, JSON.stringify(merged, null, 2), \"utf-8\");\n}\n","import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"rounded-xl border bg-card text-card-foreground shadow\", className)} {...props} />\n));\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-6\", className)} {...props} />\n));\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(({ className, ...props }, ref) => (\n  <h3 ref={ref} className={cn(\"font-semibold leading-none tracking-tight\", className)} {...props} />\n));\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(({ className, ...props }, ref) => (\n  <p ref={ref} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />\n));\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n));\nCardContent.displayName = \"CardContent\";\n\nconst CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center p-6 pt-0\", className)} {...props} />\n));\nCardFooter.displayName = \"CardFooter\";\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\n","import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table ref={ref} className={cn(\"w-full caption-bottom text-sm\", className)} {...props} />\n  </div>\n));\nTable.displayName = \"Table\";\n\nconst TableHeader = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n));\nTableHeader.displayName = \"TableHeader\";\n\nconst TableBody = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(({ className, ...props }, ref) => (\n  <tbody ref={ref} className={cn(\"[&_tr:last-child]:border-0\", className)} {...props} />\n));\nTableBody.displayName = \"TableBody\";\n\nconst TableFooter = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(({ className, ...props }, ref) => (\n  <tfoot ref={ref} className={cn(\"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\", className)} {...props} />\n));\nTableFooter.displayName = \"TableFooter\";\n\nconst TableRow = React.forwardRef<HTMLTableRowElement, React.HTMLAttributes<HTMLTableRowElement>>(({ className, ...props }, ref) => (\n  <tr ref={ref} className={cn(\"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\", className)} {...props} />\n));\nTableRow.displayName = \"TableRow\";\n\nconst TableHead = React.forwardRef<HTMLTableCellElement, React.ThHTMLAttributes<HTMLTableCellElement>>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n));\nTableHead.displayName = \"TableHead\";\n\nconst TableCell = React.forwardRef<HTMLTableCellElement, React.TdHTMLAttributes<HTMLTableCellElement>>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\n      \"p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]\",\n      className\n    )}\n    {...props}\n  />\n));\nTableCell.displayName = \"TableCell\";\n\nconst TableCaption = React.forwardRef<HTMLTableCaptionElement, React.HTMLAttributes<HTMLTableCaptionElement>>(({ className, ...props }, ref) => (\n  <caption ref={ref} className={cn(\"mt-4 text-sm text-muted-foreground\", className)} {...props} />\n));\nTableCaption.displayName = \"TableCaption\";\n\nexport { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminCitiesManager = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminCitiesManager() from the server but AdminCitiesManager is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/arcain/new/src/components/admin/AdminCitiesManager.tsx\",\n    \"AdminCitiesManager\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminCityRowActions = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminCityRowActions() from the server but AdminCityRowActions is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Desktop/arcain/new/src/components/admin/AdminCityRowActions.tsx\",\n    \"AdminCityRowActions\",\n);\n","import { readCities } from \"@/lib/data\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { AdminCitiesManager } from \"@/components/admin/AdminCitiesManager\";\nimport { AdminCityRowActions } from \"@/components/admin/AdminCityRowActions\";\n\nexport default async function AdminCitiesPage() {\n  const cities = await readCities();\n\n  return (\n    <div>\n      <h1 className=\"text-2xl font-bold tracking-tight sm:text-3xl\">Cities</h1>\n      <p className=\"mt-1 text-muted-foreground\">Manage cities available for house listings.</p>\n      <Card className=\"mt-6\">\n        <CardHeader>\n          <AdminCitiesManager />\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Name</TableHead>\n                <TableHead>Slug</TableHead>\n                <TableHead className=\"text-right\">Actions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {cities.map((city) => (\n                <TableRow key={city.id}>\n                  <TableCell className=\"font-medium\">{city.name}</TableCell>\n                  <TableCell className=\"text-muted-foreground\">{city.slug}</TableCell>\n                  <TableCell className=\"text-right\">\n                    <AdminCityRowActions city={city} />\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[3,4]}