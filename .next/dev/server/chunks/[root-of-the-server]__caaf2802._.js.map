{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/emil/Desktop/arcain/new/src/lib/data.ts"],"sourcesContent":["import { promises as fs } from \"fs\";\nimport path from \"path\";\nimport type { House, City, User } from \"@/types\";\n\nconst dataDir = path.join(process.cwd(), \"src/data\");\nconst usersTmpPath = \"/tmp/users.json\";\n\nexport async function readHouses(): Promise<House[]> {\n  const filePath = path.join(dataDir, \"houses.json\");\n  const data = await fs.readFile(filePath, \"utf-8\");\n  return JSON.parse(data);\n}\n\nexport async function writeHouses(houses: House[]): Promise<void> {\n  const filePath = path.join(dataDir, \"houses.json\");\n  try {\n    await fs.writeFile(filePath, JSON.stringify(houses, null, 2), \"utf-8\");\n  } catch {\n    // Read-only filesystem (e.g. Vercel): skip persist\n  }\n}\n\nexport async function readCities(): Promise<City[]> {\n  const filePath = path.join(dataDir, \"cities.json\");\n  const data = await fs.readFile(filePath, \"utf-8\");\n  return JSON.parse(data);\n}\n\nexport async function writeCities(cities: City[]): Promise<void> {\n  const filePath = path.join(dataDir, \"cities.json\");\n  try {\n    await fs.writeFile(filePath, JSON.stringify(cities, null, 2), \"utf-8\");\n  } catch {\n    // Read-only filesystem (e.g. Vercel): skip persist\n  }\n}\n\nfunction mergeUsersByEmail(fileUsers: User[], tmpUsers: User[]): User[] {\n  const byEmail = new Map<string, User>();\n  for (const u of fileUsers) byEmail.set(u.email.toLowerCase(), u);\n  for (const u of tmpUsers) byEmail.set(u.email.toLowerCase(), u);\n  return Array.from(byEmail.values());\n}\n\nexport async function readUsers(): Promise<User[]> {\n  const filePath = path.join(dataDir, \"users.json\");\n  const data = await fs.readFile(filePath, \"utf-8\");\n  const fileUsers: User[] = JSON.parse(data);\n  try {\n    const tmpData = await fs.readFile(usersTmpPath, \"utf-8\");\n    const tmpUsers: User[] = JSON.parse(tmpData);\n    return mergeUsersByEmail(fileUsers, tmpUsers);\n  } catch {\n    return fileUsers;\n  }\n}\n\nexport async function writeUsers(users: User[]): Promise<void> {\n  const filePath = path.join(dataDir, \"users.json\");\n  let fileUsers: User[];\n  try {\n    const data = await fs.readFile(filePath, \"utf-8\");\n    fileUsers = JSON.parse(data);\n  } catch {\n    fileUsers = [];\n  }\n  const merged = mergeUsersByEmail(fileUsers, users);\n  await fs.writeFile(usersTmpPath, JSON.stringify(merged, null, 2), \"utf-8\");\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAGA,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AACzC,MAAM,eAAe;AAEd,eAAe;IACpB,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,SAAS;IACpC,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,UAAU;IACzC,OAAO,KAAK,KAAK,CAAC;AACpB;AAEO,eAAe,YAAY,MAAe;IAC/C,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,SAAS;IACpC,IAAI;QACF,MAAM,yGAAE,CAAC,SAAS,CAAC,UAAU,KAAK,SAAS,CAAC,QAAQ,MAAM,IAAI;IAChE,EAAE,OAAM;IACN,mDAAmD;IACrD;AACF;AAEO,eAAe;IACpB,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,SAAS;IACpC,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,UAAU;IACzC,OAAO,KAAK,KAAK,CAAC;AACpB;AAEO,eAAe,YAAY,MAAc;IAC9C,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,SAAS;IACpC,IAAI;QACF,MAAM,yGAAE,CAAC,SAAS,CAAC,UAAU,KAAK,SAAS,CAAC,QAAQ,MAAM,IAAI;IAChE,EAAE,OAAM;IACN,mDAAmD;IACrD;AACF;AAEA,SAAS,kBAAkB,SAAiB,EAAE,QAAgB;IAC5D,MAAM,UAAU,IAAI;IACpB,KAAK,MAAM,KAAK,UAAW,QAAQ,GAAG,CAAC,EAAE,KAAK,CAAC,WAAW,IAAI;IAC9D,KAAK,MAAM,KAAK,SAAU,QAAQ,GAAG,CAAC,EAAE,KAAK,CAAC,WAAW,IAAI;IAC7D,OAAO,MAAM,IAAI,CAAC,QAAQ,MAAM;AAClC;AAEO,eAAe;IACpB,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,SAAS;IACpC,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,UAAU;IACzC,MAAM,YAAoB,KAAK,KAAK,CAAC;IACrC,IAAI;QACF,MAAM,UAAU,MAAM,yGAAE,CAAC,QAAQ,CAAC,cAAc;QAChD,MAAM,WAAmB,KAAK,KAAK,CAAC;QACpC,OAAO,kBAAkB,WAAW;IACtC,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,WAAW,KAAa;IAC5C,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,SAAS;IACpC,IAAI;IACJ,IAAI;QACF,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,UAAU;QACzC,YAAY,KAAK,KAAK,CAAC;IACzB,EAAE,OAAM;QACN,YAAY,EAAE;IAChB;IACA,MAAM,SAAS,kBAAkB,WAAW;IAC5C,MAAM,yGAAE,CAAC,SAAS,CAAC,cAAc,KAAK,SAAS,CAAC,QAAQ,MAAM,IAAI;AACpE"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///Users/emil/Desktop/arcain/new/src/app/api/auth/login/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { readUsers } from \"@/lib/data\";\nimport type { User } from \"@/types\";\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { email, password } = body;\n    if (!email || !password) {\n      return NextResponse.json({ error: \"Email and password required\" }, { status: 400 });\n    }\n    const users = await readUsers();\n    const user = users.find((u: User) => u.email === email && u.password === password);\n    if (!user) {\n      return NextResponse.json(\n        { error: \"Invalid credentials. If you just registered, try again or use a persistent database for production.\" },\n        { status: 401 }\n      );\n    }\n    const { password: _, ...safeUser } = user;\n    return NextResponse.json({ user: safeUser });\n  } catch {\n    return NextResponse.json({ error: \"Server error\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;QAC5B,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,2SAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA8B,GAAG;gBAAE,QAAQ;YAAI;QACnF;QACA,MAAM,QAAQ,MAAM,IAAA,6JAAS;QAC7B,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAY,EAAE,KAAK,KAAK,SAAS,EAAE,QAAQ,KAAK;QACzE,IAAI,CAAC,MAAM;YACT,OAAO,2SAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsG,GAC/G;gBAAE,QAAQ;YAAI;QAElB;QACA,MAAM,EAAE,UAAU,CAAC,EAAE,GAAG,UAAU,GAAG;QACrC,OAAO,2SAAY,CAAC,IAAI,CAAC;YAAE,MAAM;QAAS;IAC5C,EAAE,OAAM;QACN,OAAO,2SAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}}]
}