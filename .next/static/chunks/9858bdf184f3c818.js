(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8097,e=>{"use strict";var t=e.i(12013),a=e.i(69589),i=e.i(46782);let o=a.forwardRef(({className:e,type:a,...o},n)=>(0,t.jsx)("input",{type:a,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...o}));o.displayName="Input",e.s(["Input",()=>o])},61144,e=>{"use strict";var t=e.i(12013),a=e.i(69589);e.i(10725);var i=e.i(85291),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,o)=>{let n=(0,i.createSlot)(`Primitive.${o}`),r=a.forwardRef((e,a)=>{let{asChild:i,...r}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?n:o,{...r,ref:a})});return r.displayName=`Primitive.${o}`,{...e,[o]:r}},{}),n=a.forwardRef((e,a)=>(0,t.jsx)(o.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var r=e.i(51004),s=e.i(46782);let l=(0,r.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(n,{ref:i,className:(0,s.cn)(l(),e),...a}));d.displayName=n.displayName,e.s(["Label",()=>d],61144)},16455,e=>{"use strict";var t=e.i(12013),a=e.i(69589),i=e.i(63758),o=e.i(24709),n=e.i(19506),r=e.i(61680),s=e.i(78297),l=e.i(18407),d=e.i(10244),c=e.i(3375),u=e.i(79365),f=e.i(12854),p=e.i(97754),m=e.i(23368),g=e.i(54440),x=e.i(52855),h="Dialog",[y,v]=(0,n.createContextScope)(h),[b,j]=y(h),D=e=>{let{__scopeDialog:i,children:o,open:n,defaultOpen:l,onOpenChange:d,modal:c=!0}=e,u=a.useRef(null),f=a.useRef(null),[p,m]=(0,s.useControllableState)({prop:n,defaultProp:l??!1,onChange:d,caller:h});return(0,t.jsx)(b,{scope:i,triggerRef:u,contentRef:f,contentId:(0,r.useId)(),titleId:(0,r.useId)(),descriptionId:(0,r.useId)(),open:p,onOpenChange:m,onOpenToggle:a.useCallback(()=>m(e=>!e),[m]),modal:c,children:o})};D.displayName=h;var w="DialogTrigger",N=a.forwardRef((e,a)=>{let{__scopeDialog:n,...r}=e,s=j(w,n),l=(0,o.useComposedRefs)(a,s.triggerRef);return(0,t.jsx)(f.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":q(s.open),...r,ref:l,onClick:(0,i.composeEventHandlers)(e.onClick,s.onOpenToggle)})});N.displayName=w;var C="DialogPortal",[R,I]=y(C,{forceMount:void 0}),P=e=>{let{__scopeDialog:i,forceMount:o,children:n,container:r}=e,s=j(C,i);return(0,t.jsx)(R,{scope:i,forceMount:o,children:a.Children.map(n,e=>(0,t.jsx)(u.Presence,{present:o||s.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:r,children:e})}))})};P.displayName=C;var S="DialogOverlay",E=a.forwardRef((e,a)=>{let i=I(S,e.__scopeDialog),{forceMount:o=i.forceMount,...n}=e,r=j(S,e.__scopeDialog);return r.modal?(0,t.jsx)(u.Presence,{present:o||r.open,children:(0,t.jsx)(O,{...n,ref:a})}):null});E.displayName=S;var F=(0,x.createSlot)("DialogOverlay.RemoveScroll"),O=a.forwardRef((e,a)=>{let{__scopeDialog:i,...o}=e,n=j(S,i);return(0,t.jsx)(m.RemoveScroll,{as:F,allowPinchZoom:!0,shards:[n.contentRef],children:(0,t.jsx)(f.Primitive.div,{"data-state":q(n.open),...o,ref:a,style:{pointerEvents:"auto",...o.style}})})}),T="DialogContent",A=a.forwardRef((e,a)=>{let i=I(T,e.__scopeDialog),{forceMount:o=i.forceMount,...n}=e,r=j(T,e.__scopeDialog);return(0,t.jsx)(u.Presence,{present:o||r.open,children:r.modal?(0,t.jsx)(k,{...n,ref:a}):(0,t.jsx)(_,{...n,ref:a})})});A.displayName=T;var k=a.forwardRef((e,n)=>{let r=j(T,e.__scopeDialog),s=a.useRef(null),l=(0,o.useComposedRefs)(n,r.contentRef,s);return a.useEffect(()=>{let e=s.current;if(e)return(0,g.hideOthers)(e)},[]),(0,t.jsx)(B,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,i.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,i.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),_=a.forwardRef((e,i)=>{let o=j(T,e.__scopeDialog),n=a.useRef(!1),r=a.useRef(!1);return(0,t.jsx)(B,{...e,ref:i,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||o.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));let a=t.target;o.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})}),B=a.forwardRef((e,i)=>{let{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:c,...u}=e,f=j(T,n),m=a.useRef(null),g=(0,o.useComposedRefs)(i,m);return(0,p.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:c,children:(0,t.jsx)(l.DismissableLayer,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":q(f.open),...u,ref:g,onDismiss:()=>f.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(J,{titleId:f.titleId}),(0,t.jsx)(V,{contentRef:m,descriptionId:f.descriptionId})]})]})}),H="DialogTitle",M=a.forwardRef((e,a)=>{let{__scopeDialog:i,...o}=e,n=j(H,i);return(0,t.jsx)(f.Primitive.h2,{id:n.titleId,...o,ref:a})});M.displayName=H;var $="DialogDescription",L=a.forwardRef((e,a)=>{let{__scopeDialog:i,...o}=e,n=j($,i);return(0,t.jsx)(f.Primitive.p,{id:n.descriptionId,...o,ref:a})});L.displayName=$;var U="DialogClose",z=a.forwardRef((e,a)=>{let{__scopeDialog:o,...n}=e,r=j(U,o);return(0,t.jsx)(f.Primitive.button,{type:"button",...n,ref:a,onClick:(0,i.composeEventHandlers)(e.onClick,()=>r.onOpenChange(!1))})});function q(e){return e?"open":"closed"}z.displayName=U;var K="DialogTitleWarning",[W,G]=(0,n.createContext)(K,{contentName:T,titleName:H,docsSlug:"dialog"}),J=({titleId:e})=>{let t=G(K),i=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(i))},[i,e]),null},V=({contentRef:e,descriptionId:t})=>{let i=G("DialogDescriptionWarning"),o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${i.contentName}}.`;return a.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(o))},[o,e,t]),null},X=e.i(50623),Z=e.i(46782);let Q=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(E,{ref:i,className:(0,Z.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));Q.displayName=E.displayName;let Y=a.forwardRef(({className:e,children:a,showClose:i=!0,...o},n)=>(0,t.jsxs)(P,{children:[(0,t.jsx)(Q,{}),(0,t.jsxs)(A,{ref:n,className:(0,Z.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...o,children:[a,i&&(0,t.jsxs)(z,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(X.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));Y.displayName=A.displayName;let ee=({className:e,...a})=>(0,t.jsx)("div",{className:(0,Z.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});ee.displayName="DialogHeader";let et=({className:e,...a})=>(0,t.jsx)("div",{className:(0,Z.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});et.displayName="DialogFooter";let ea=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(M,{ref:i,className:(0,Z.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));ea.displayName=M.displayName;let ei=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(L,{ref:i,className:(0,Z.cn)("text-sm text-muted-foreground",e),...a}));ei.displayName=L.displayName,e.s(["Dialog",()=>D,"DialogContent",()=>Y,"DialogDescription",()=>ei,"DialogFooter",()=>et,"DialogHeader",()=>ee,"DialogTitle",()=>ea,"DialogTrigger",()=>N],16455)},3696,e=>{"use strict";var t=e.i(12013),a=e.i(69589),i=e.i(50298),o=e.i(56815),n=e.i(8097),r=e.i(61144),s=e.i(16455);function l({cityId:e,initialName:l="",initialSlug:d="",mode:c="add"}){let u=(0,i.useRouter)(),[f,p]=(0,a.useState)(!1),[m,g]=(0,a.useState)(l),[x,h]=(0,a.useState)(d),[y,v]=(0,a.useState)(!1),[b,j]=(0,a.useState)("");async function D(t){t.preventDefault(),j(""),v(!0);try{let t="edit"===c&&e?`/api/cities/${e}`:"/api/cities",a="edit"===c&&e?"PUT":"POST",i=await fetch(t,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,slug:x})});if(!i.ok){let e=await i.json().catch(()=>({}));j(e.error||"Failed"),v(!1);return}p(!1),u.refresh()}catch{j("Something went wrong")}finally{v(!1)}}async function w(){if(e){v(!0);try{let t=await fetch(`/api/cities/${e}`,{method:"DELETE"});if(t.ok)p(!1),u.refresh();else{let e=await t.json().catch(()=>({}));j(e.error||"Failed to delete")}}finally{v(!1)}}}(0,a.useEffect)(()=>{f&&(g(l),h(d),j(""))},[f,l,d]);let N="add"===c?(0,t.jsx)(o.Button,{children:"Add city"}):(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",children:"Edit"});return(0,t.jsxs)(s.Dialog,{open:f,onOpenChange:p,children:[(0,t.jsx)(s.DialogTrigger,{asChild:!0,children:N}),(0,t.jsxs)(s.DialogContent,{children:[(0,t.jsxs)(s.DialogHeader,{children:[(0,t.jsx)(s.DialogTitle,{children:"add"===c?"Add city":"Edit city"}),(0,t.jsx)(s.DialogDescription,{children:"add"===c?"Create a new city for listings.":"Update city name and slug."})]}),(0,t.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[b&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:b}),(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Label,{htmlFor:"city-name",children:"Name"}),(0,t.jsx)(n.Input,{id:"city-name",value:m,onChange:e=>g(e.target.value),required:!0,className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Label,{htmlFor:"city-slug",children:"Slug"}),(0,t.jsx)(n.Input,{id:"city-slug",value:x,onChange:e=>h(e.target.value),required:!0,className:"mt-1",placeholder:"e.g. london"})]}),(0,t.jsxs)(s.DialogFooter,{children:["edit"===c&&e&&(0,t.jsx)(o.Button,{type:"button",variant:"destructive",onClick:w,disabled:y,children:"Delete"}),(0,t.jsx)(o.Button,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:y,children:"Cancel"}),(0,t.jsx)(o.Button,{type:"submit",disabled:y,children:y?"Savingâ€¦":"add"===c?"Create":"Update"})]})]})]})]})}e.s(["AdminCitiesManager",()=>l])},385,e=>{"use strict";var t=e.i(12013),a=e.i(3696);function i({city:e}){return(0,t.jsx)(a.AdminCitiesManager,{cityId:e.id,initialName:e.name,initialSlug:e.slug,mode:"edit"})}e.s(["AdminCityRowActions",()=>i])}]);